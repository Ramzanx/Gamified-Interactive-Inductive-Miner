<div class="settingsForButtons">
    <!-- <mat-form-field appearance="outline" class="aligned-element" style="margin-top: 30px">
        <mat-label>Select DFG Layout</mat-label>
        <mat-select [(value)]="selectedLayout" (selectionChange)="applyLayout()" [disabled]="isPetriNetFinished">
            <mat-option *ngFor="let layout of availableLayouts" [value]="layout">
                {{ layout }}
            </mat-option>
        </mat-select>
    </mat-form-field>

  <mat-slide-toggle 
    [(ngModel)]="colouredBoxesEnabled" 
    (change)="toggleColouredBoxes()" 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    color="primary"
    class="aligned-element">
    Show Boxes
  </mat-slide-toggle> -->
  <div class="settingsForToggles" style="display: flex; flex-direction: column; gap: 0px; margin: 5px 0;">
  
    <!-- Layout Switch -->
    <mat-slide-toggle
      [(ngModel)]="isSpringEmbedder"
      (change)="applyLayout()"
      [disabled]="!isDFGinNet || isPetriNetFinished"
      color="primary"
      class="aligned-element">
      Sugiyama/Spring Embedder
    </mat-slide-toggle>

    <!-- Coloured Boxes Switch -->
    <mat-slide-toggle
      [(ngModel)]="colouredBoxesEnabled"
      (change)="toggleColouredBoxes()"
      [disabled]="!isDFGinNet"
      color="primary"
      class="aligned-element">
      Show Cut Outline Boxes
    </mat-slide-toggle>

  </div>

  <button 
    mat-raised-button 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="performCut(true)">
    Perform Cut
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="resetCut()">
    Reset Marked Edges
  </button>
  <button 
    mat-raised-button 
    [disabled]="!selectedEventLog || !isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="applyFallThrough()">
    Apply Fall Through
  </button>
  <button 
    mat-raised-button 
    [disabled]="!selectedEventLog || isPetriNetFinished" 
    disabledInteractive
    color="primary"
    class="aligned-element"
    (click)="applyLayoutToSelectedEventLog()">
    Redo DFG Layout
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isPetriNetFinished" 
    disabledInteractive 
    color="primary" 
    class="aligned-element" 
    (click)="downloadPetriNet('pnml')" 
    title="Download PetriNet as PNML (enabled when finished)">
    Download PetriNet (PNML)
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isPetriNetFinished" 
    disabledInteractive 
    color="primary" 
    class="aligned-element" 
    (click)="downloadPetriNet('json')"
    title="Download PetriNet as JSON (enabled when finished)">
    Download PetriNet (JSON)
  </button>
</div>

<div>
  <p-progressbar [value]="50" [hidden]="true" />
</div>


<div style="display: flex; width: 70%; justify-content: center; margin-bottom: -1rem;">
  <div class="timer" [style.opacity]="timerRunning ? 1 : 0.5">
    ‚è±Ô∏è Time: {{ formattedTime }}
  </div>
</div>


<div id="resizableContainer" class="resizable-container">

  <!-- Countdown Display -->
  <div *ngIf="countingDown" class="countdown-overlay">
    <div 
      class="countdown-number" 
      [class.countdown-animate]="animateCountdown">
      {{ countdown }}
    </div>
  </div>

  <div id="difficultyScreen" class="difficulty-screen">
    
    <h1 class="difficulty-title">Choose your difficulty</h1>
  
    <div class="banner-grid">
      <!-- Top row -->
      <div class="banner-row">
        <!-- Easy: Always available -->
        <div 
          class="banner" 
          (click)="difficulty = 'Easy'" 
          [class.selected]="difficulty === 'Easy'">
          <div class="caption">Easy</div>
          <div class="stars">
            <span *ngFor="let i of [0, 1, 2]">
              {{ i < 1 ? '‚òÖ' : '‚òÜ' }}
            </span>
          </div>
        </div>
      
        <!-- Medium: Requires level >= 3 -->
        <div 
          class="banner" 
          [class.locked]="userLevel < 3"
          [class.selected]="difficulty === 'Medium'"
          (click)="handleDifficultyClick('Medium', 3)">
          
          <div class="caption">Medium</div>
          <div class="stars">
            <span *ngFor="let i of [0, 1, 2]">
              ‚òÖ
            </span>
          </div>
          <div class="lock-overlay" *ngIf="userLevel < 3">
            üîí <br />
            Reach <br />
            Level 3
          </div>
        </div>
      
        <!-- Hard: Requires level >= 10 -->
        <div 
          class="banner" 
          [class.locked]="userLevel < 10"
          [class.selected]="difficulty === 'Hard'"
          (click)="handleDifficultyClick('Hard', 10)">
          
          <div class="caption">Hard</div>
          <div class="stars">
            <span *ngFor="let i of [0, 1, 2]">
              ‚òÖ
            </span>
          </div>
          <div class="lock-overlay" *ngIf="userLevel < 10">
            üîí <br />
            Reach <br />
            Level 10
          </div>
        </div>
      </div>
       
    <!-- Bottom row: Custom -->
    <div 
      class="banner custom-banner" 
      (click)="difficulty = 'Custom'" 
      [class.selected]="difficulty === 'Custom'">
      <div class="caption">Custom</div>
      <div class="custom-text">Create and use your own Examples</div>
    </div>
  </div>

  <button 
    mat-raised-button 
    class="start-button"
    (click)="startCountdown()">
    {{ difficulty === 'Custom' ? 'Custom Mode' : 'Start Game' }}
  </button>

  <div style="margin-top: 1rem;">
    <button mat-raised-button color="warn" (click)="stopGame()">Stop Game</button>
  </div>
    
    <svg [hidden]="false" #drawingArea id="drawing" class="canvas" (drop)="processDropEvent($event)" (mousedown)="processMouseDown($event)"
        (mouseup)="processMouseUp($event)" (mousemove)="processMouseMove($event)" (dragover)="prevent($event)" (contextmenu)="prevent($event)">
    </svg>
</div>
