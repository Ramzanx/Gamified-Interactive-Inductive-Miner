<div class="settingsForButtons">
    <!-- <mat-form-field appearance="outline" class="aligned-element" style="margin-top: 30px">
        <mat-label>Select DFG Layout</mat-label>
        <mat-select [(value)]="selectedLayout" (selectionChange)="applyLayout()" [disabled]="isPetriNetFinished">
            <mat-option *ngFor="let layout of availableLayouts" [value]="layout">
                {{ layout }}
            </mat-option>
        </mat-select>
    </mat-form-field>

  <mat-slide-toggle 
    [(ngModel)]="colouredBoxesEnabled" 
    (change)="toggleColouredBoxes()" 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    color="primary"
    class="aligned-element">
    Show Boxes
  </mat-slide-toggle> -->
  <div class="settingsForToggles" style="display: flex; flex-direction: column; gap: 0px; margin: 5px 0;">
  
    <!-- Layout Switch -->
    <mat-slide-toggle
      [(ngModel)]="isSpringEmbedder"
      (change)="applyLayout()"
      [disabled]="!isDFGinNet || isPetriNetFinished"
      color="primary"
      class="aligned-element">
      Sugiyama/Spring Embedder
    </mat-slide-toggle>

    <!-- Coloured Boxes Switch -->
    <mat-slide-toggle
      [(ngModel)]="colouredBoxesEnabled"
      (change)="toggleColouredBoxes()"
      [disabled]="!isDFGinNet"
      color="primary"
      class="aligned-element">
      Show Cut Outline Boxes
    </mat-slide-toggle>

  </div>

  <button 
    mat-raised-button 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="performCut(true)">
    Perform Cut
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="resetCut()">
    Reset Marked Edges
  </button>
  <button 
    mat-raised-button 
    [disabled]="!selectedEventLog || !isDFGinNet || isPetriNetFinished" 
    disabledInteractive
    color="primary" 
    class="aligned-element" 
    (click)="applyFallThrough()">
    Apply Fall Through
  </button>
  <button 
    mat-raised-button 
    [disabled]="!selectedEventLog || isPetriNetFinished" 
    disabledInteractive
    color="primary"
    class="aligned-element"
    (click)="applyLayoutToSelectedEventLog()">
    Redo DFG Layout
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isPetriNetFinished" 
    disabledInteractive 
    color="primary" 
    class="aligned-element" 
    (click)="downloadPetriNet('pnml')" 
    title="Download PetriNet as PNML (enabled when finished)">
    Download PetriNet (PNML)
  </button>
  <button 
    mat-raised-button 
    [disabled]="!isPetriNetFinished" 
    disabledInteractive 
    color="primary" 
    class="aligned-element" 
    (click)="downloadPetriNet('json')"
    title="Download PetriNet as JSON (enabled when finished)">
    Download PetriNet (JSON)
  </button>
</div>

<div>
  <p-progressbar [value]="50" [hidden]="true" />
</div>


<div style="display: flex; width: 70%; justify-content: center; margin-bottom: -1rem;">
  <div class="timer" [style.opacity]="timerRunning ? 1 : 0.5">
    ⏱️ Time: {{ formattedTime }}
  </div>
</div>


<div id="resizableContainer" class="resizable-container">

  <!-- Countdown Display -->
  <div *ngIf="countingDown" class="countdown-overlay">
    <div 
      class="countdown-number" 
      [class.animate]="animateCountdown"
    >
      {{ countdown }}
    </div>
  </div>

  <div id="difficultyScreen" class="difficulty-screen">
    <h1 style="font-size: 3rem; font-weight: bold; margin: 0;">
      Choose your difficulty
    </h1>
  
    <div style="display: flex; gap: 1.5rem;">
      <div 
        (click)="difficulty = 'Easy'" 
        [class.selected]="difficulty === 'Easy'"
        class="banner">
        <img src="assets/Easy.png" alt="Easy" />
        <div class="caption">Easy</div>
      </div>
  
      <div 
        (click)="difficulty = 'Medium'" 
        [class.selected]="difficulty === 'Medium'"
        class="banner">
        <img src="assets/Medium.png" alt="Medium" />
        <div class="caption">Medium</div>
      </div>
  
      <div 
        (click)="difficulty = 'Hard'" 
        [class.selected]="difficulty === 'Hard'"
        class="banner">
        <img src="assets/Hard.png" alt="Hard" />
        <div class="caption">Hard</div>
      </div>
    </div>
  
    <button mat-raised-button color="primary" (click)="startCountdown()">Start Game</button>
  </div>

  <div style="margin-top: 1rem;">
    <button mat-raised-button color="warn" (click)="stopGame()">Stop Game</button>
  </div>
  
    

  <svg [hidden]="false" #drawingArea id="drawing" class="canvas" (drop)="processDropEvent($event)" (mousedown)="processMouseDown($event)"
      (mouseup)="processMouseUp($event)" (mousemove)="processMouseMove($event)" (dragover)="prevent($event)" (contextmenu)="prevent($event)">
  </svg>
</div>
